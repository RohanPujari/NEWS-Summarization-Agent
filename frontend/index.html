<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI News Swipe</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
    background: black;
    overflow: hidden;
}

.card {
    transition: transform 0.5s ease, opacity 0.5s ease;
}
</style>
</head>

<body class="text-white flex items-center justify-center h-screen">

<div id="card-container" class="w-full max-w-xl h-[85vh] relative">
</div>

<script>
let articles = [];
let currentIndex = 0;

async function loadArticles() {
    const response = await fetch("http://127.0.0.1:8000/articles?limit=20");
    const data = await response.json();
    articles = data.articles;
    showArticle();
}

function showArticle() {
    const container = document.getElementById("card-container");
    container.innerHTML = "";

    if (currentIndex >= articles.length) return;

    const article = articles[currentIndex];

    const card = document.createElement("div");
    card.className = "card absolute w-full h-full bg-gray-900 rounded-2xl shadow-2xl overflow-hidden";

    card.innerHTML = `
        <div class="h-1/2 bg-cover bg-center"
             style="background-image: url('${article.image_url || "https://via.placeholder.com/600x400"}')">
        </div>
        <div class="p-6 overflow-y-auto h-1/2">
            <h2 class="text-2xl font-bold mb-3">${article.title}</h2>
            <p class="text-gray-300">${article.summary}</p>
        </div>
    `;

    container.appendChild(card);
}

document.addEventListener("keydown", function(event) {
    if (event.key === "ArrowRight") {
        currentIndex++;
        showArticle();
    }
    if (event.key === "ArrowLeft" && currentIndex > 0) {
        currentIndex--;
        showArticle();
    }
});

loadArticles();
</script>

</body>
</html>
